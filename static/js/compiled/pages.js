// Generated by CoffeeScript 1.6.3
/*
	@author: nicolasbrugneaux.me
*/


(function() {
  var changePage, index, loadFrom, pages;

  index = 0;

  pages = ["home", "about", "skills", "contact", "blog"];

  loadFrom = function(from, index) {
    var to;
    to = from === "right" ? "left" : "right";
    return $("#main-content").hide("slide", {
      direction: from
    }, 300, function() {
      return $("#main-content").load("pages/" + pages[index] + ".php", function() {
        $("#main-content").show("slide", {
          direction: to
        }, 500);
        if (window.location.hash.substring(1) === "blog") {
          blogify();
        }
        return linkify('a.no-btn');
      });
    });
  };

  changePage = function(value) {
    var i, key, page, _i, _len;
    i = $.inArray(value, pages);
    if (i !== index) {
      if (i < index) {
        loadFrom("right", i);
      } else {
        loadFrom("left", i);
      }
      for (key = _i = 0, _len = pages.length; _i < _len; key = ++_i) {
        page = pages[key];
        if (key === i) {
          $('#menu-' + page).parent().addClass('active');
        } else {
          $('#menu-' + page).parent().removeClass('active');
        }
      }
      if (value === "skills" || value === "about") {
        $('#menu-about').parent().addClass('active');
      }
      return index = i;
    }
  };

  $(document).ready(function() {
    var i;
    slideUpDownNotifications();
    i = $.inArray((window.location.hash.substring(1) === "" ? 'home' : window.location.hash.substring(1)), pages);
    $("#main-content").load((i === -1 ? "pages/home" : "pages/" + pages[i]) + ".php", function() {
      linkify('a.no-btn');
      if (window.location.hash.substring(1) === "blog") {
        return blogify();
      }
    });
    index = i;
    return $(window).on('hashchange', function() {
      if ($.inArray(window.location.hash.substring(1), pages) >= 0) {
        return changePage(window.location.hash.substring(1));
      } else {
        return changePage("home");
      }
    });
  });

}).call(this);
